<!--
title: 某频道视频订阅数和月收入关系
resource:
  jsFiles:
    - ${url.dataSet}
    - ${url.jquery}
    - ${url['g2-plugin-slider']}
plotUsage: 数据来源：demo数据
recommend: true
subCat: 区间面积图
-->
<script>
    const data = [
        {
            "Date": "22 February",
            "订阅数": 50000,
            "月收入": 125000
        },
        {
            "Date": "28 February",
            "订阅数": 60000,
            "月收入": 150000
        },
        {
            "Date": "3 March",
            "订阅数": 100000,
            "月收入": 250000
        },
        {
            "Date": "20 March",
            "订阅数": 200000,
            "月收入": 500000
        },
        {
            "Date": "7 April",
            "订阅数": 250000,
            "月收入": 625000
        },
        {
            "Date": "13 June",
            "订阅数": 210000,
            "月收入": 525000
        }
    ];
    const chart = new G2.Chart({
        container: 'mountNode',
        forceFit: true,
        height: window.innerHeight,
        padding: 'auto'
    });
    chart.source(data);
    const ds = new DataSet();
    const dv = ds.createView()
        .source(data)
        .transform({
            type: 'fold',
            fields: ["订阅数", "月收入"],
            key: 'type',
            value: 'value',
            retains: ['Date']
        });
    const dv2 = ds.createView().source(data).transform({
        type: 'map',
        callback(row) {
            row.range = [row["订阅数"], row['月收入']];
            return row;
        }
    });
    chart.scale('Date', {
        range: [0, 1],
        tickCount: 10,
        type: 'timeCat'
    });
    chart.axis('Date', {
        label: {
            textStyle: {
                fill: '#aaaaaa'
            }
        }
    });
    chart.axis('value', {
        label: {
            textStyle: {
                fill: '#aaaaaa'
            }
        }
    });
    chart.tooltip({
        crosshairs: 'y'
    });

    //view1
    const view1 = chart.view();
    view1.source(dv2);
    view1.area().position('Date*range').color('#fedba9').opacity(0.1).tooltip(false);
    //view1
    const view2 = chart.view();
    view2.source(dv);
    view2.line().position('Date*value').color('type', ['#b5392b', '#000000']).opacity(1);
    view2.point().position('Date*value').color('type', ['#b5392b', '#000000']).opacity(1).shape('circle');

    chart.render();
</script>