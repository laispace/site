<!--
title: 产品类别销售额对比
resource:
  jsFiles:
    - ${url.dataSet}
    - ${url.jquery}
plotDescription: 该图展示了产品按照类别分组的销售情况。
plotUsage: 数据来源：demo数据
tags: 辅助标记
recommend: true
subCat: 基础柱状图
-->
<script>
    const data = [
            { type: '书架', value: 48000, cat: '家具' },
            { type: '椅子', value: 36000, cat: '家具' },
            { type: '桌子', value: 9000, cat: '家具' },

            { type: '复印机', value: 30500, cat: '技术' },
            { type: '电话', value: 22000, cat: '技术' },
            { type: '配件', value: 12000, cat: '技术' },

            { type: '纸张', value: 25000, cat: '办公用品' },
            { type: '笔', value: 17000, cat: '办公用品' },
            { type: '美术', value: 8000, cat: '办公用品' },
            { type: '收纳', value: 2000, cat: '办公用品' }
        ];

        const chart = new G2.Chart({
            container: 'mountNode',
            forceFit: true,
            height: window.innerHeight,
            padding: 'auto'
        });
        chart.source(data);
        chart.scale('value', {
            alias: '占比（%）'
        });
        chart.axis('type', {
            label: {
                textStyle: {
                    fill: '#aaaaaa'
                }
            },
            tickLine: {
                alignWithLabel: false,
                length: 0
            }
        });

        chart.axis('value', {
            label: {
                textStyle: {
                    fill: '#aaaaaa'
                },
                formatter:function(text){
                    return text.replace(/(\d)(?=(?:\d{3})+$)/g,'$1,');
                }
            },
            title: {
                offset: 70
            }
        });
        chart.legend(false);
        chart.interval().position('type*value').color('cat').opacity(1);
        //guide
        chart.guide().text({
            top: true,
            position: ['椅子', 'min'],
            content: '家具',
            style: {
                fill: '#c0c0c0', // 文本颜色
                fontSize: 12, // 文本大小
                fontWeight: '300',
                textAlign: 'center'
            },
            offsetY: 40
        });
        chart.guide().text({
            top: true,
            position: ['电话', 'min'],
            content: '技术',
            style: {
                fill: '#c0c0c0', // 文本颜色
                fontSize: 12, // 文本大小
                fontWeight: '300',
                textAlign: 'center'
            },
            offsetY: 40
        });
        chart.guide().text({
            top: true,
            position: ['笔', 'min'],
            content: '办公用品',
            style: {
                fill: '#c0c0c0', // 文本颜色
                fontSize: 12, // 文本大小
                fontWeight: '300'
            },
            offsetY: 40,
            offsetX: 20
        });
        chart.guide().line({
            start: ['30%','100%'],
            end: ['30%','113%'],
            lineStyle: {
                stroke: '#c0c0c0',
                lineDash:[0,0]
            }
        });
        chart.guide().line({
            start: ['60%','100%'],
            end: ['60%','113%'],
            lineStyle: {
                stroke: '#c0c0c0',
                lineDash:[0,0]
            }
        });
        chart.render();
</script>
