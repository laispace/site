<!--
index: 20
title: 渐变色柱状图
resource:
  jsFiles:
-->

<script>
  var data = [
    { year: '2014 年', sales: 145 },
    { year: '2015 年', sales: 121 },
    { year: '2016 年', sales: 100 },
    { year: '2017 年', sales: 97 },
    { year: '2018 年', sales: 85 }
  ];
  var chart = new F2.Chart({
    id: 'mountNode',
    pixelRatio: window.devicePixelRatio
  });

  chart.source(data, {
    sales: {
      tickCount: 5
    }
  });
  chart.tooltip({
    showItemMarker: false,
    onShow: function(ev) {
      var items = ev.items;
      items[0].name = null;
      items[0].name = items[0].title;
      items[0].value = '¥ ' + items[0].value;
    }
  });

  // 创建渐变色
  // 获取 canvas 上下文对像
  const ctx = chart.get('canvas').get('context');
  const height = chart.get('height'); // 获取图表的高度
  // 具体 gradient 接口参见：https://developers.weixin.qq.com/miniprogram/dev/api/canvas/gradient.html
  const grd = ctx.createLinearGradient(0, 0, 0, height);
  grd.addColorStop(0, '#1890ff');
  grd.addColorStop(1, '#fff');

  // 让柱状图的宽度适配不同的屏幕尺寸
  const barWidth = 36 * (window.innerWidth / 375);

  chart.interval().position('year*sales')
    .color(grd) // 定义柱状图颜色
    .size(barWidth);
  chart.render();
</script>
