<!--
index: 20
title: 渐变色柱状图
resource:
  jsFiles:
-->

<script>
  var data = [
    { year: '1951 年', sales: 145 },
    { year: '1952 年', sales: 61 },
    { year: '1956 年', sales: 52 },
    { year: '1957 年', sales: 50 },
    { year: '1958 年', sales: 48 },
    { year: '1959 年', sales: 38 },
    { year: '1960 年', sales: 35 },
    { year: '1962 年', sales: 30 },
  ];
  var chart = new F2.Chart({
    id: 'mountNode',
    pixelRatio: window.devicePixelRatio
  });

  chart.source(data, {
    sales: {
      tickCount: 5
    }
  });
  chart.tooltip({
    showItemMarker: false,
    onShow: function(ev) {
      var items = ev.items;
      items[0].name = null;
      items[0].name = items[0].title;
      items[0].value = '¥ ' + items[0].value;
    }
  });

  // 创建渐变色
  // 获取 canvas 上下文对像
  const ctx = chart.get('canvas').get('context');
  const width = chart.get('width'); // 获取图表的宽度
  // 创建 Y 方向的渐变对象，具体 gradient 接口参见：https://developers.weixin.qq.com/miniprogram/dev/api/canvas/gradient.html
  const grd = ctx.createLinearGradient(0, 0, width, 0);
  grd.addColorStop(0, '#1890ff');
  grd.addColorStop(1, '#fff');

  chart.interval().position('year*sales').color(grd);
  chart.render();
</script>
